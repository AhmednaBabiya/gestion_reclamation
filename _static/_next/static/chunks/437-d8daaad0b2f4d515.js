"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{1437:function(e,n,r){r.d(n,{c:function(){return L}});var o=r(4924),t=r(5893),l=r(7294),s=r(1953),i=r(1719),a=r(1163),c=r.n(a),d=r(5697),u=r.n(d),x=r(5462),h=function(e){var n=e.children,r=(0,a.useRouter)(),o=(0,x.Eu)().isAuthenticated,t=(0,l.useRef)(!1),s=(0,l.useState)(!1),i=s[0],c=s[1];return(0,l.useEffect)((function(){r.isReady&&(t.current||(t.current=!0,o?c(!0):(console.log("Not authenticated, redirecting"),r.replace({pathname:"/sign-in",query:"/"!==r.asPath?{continueUrl:r.asPath}:void 0}).catch(console.error))))}),[r.isReady]),i?n:null};h.propTypes={children:u().node};var p=r(6042),f=r(9396),v=r(9534),g=r(6829),C=r(5050),j=r(784),m=r(562),Z=r(4731),w=r(326),b=r(4235),y=(0,b.Z)((0,t.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5999 9.99999C19.5999 12.5461 18.5885 14.9879 16.7881 16.7882C14.9878 18.5886 12.546 19.6 9.9999 19.6C7.45382 19.6 5.01203 18.5886 3.21168 16.7882C1.41133 14.9879 0.399902 12.5461 0.399902 9.99999C0.399902 7.45392 1.41133 5.01212 3.21168 3.21177C5.01203 1.41142 7.45382 0.399994 9.9999 0.399994C12.546 0.399994 14.9878 1.41142 16.7881 3.21177C18.5885 5.01212 19.5999 7.45392 19.5999 9.99999ZM12.3999 6.39999C12.3999 7.03651 12.147 7.64696 11.697 8.09705C11.2469 8.54714 10.6364 8.79999 9.9999 8.79999C9.36338 8.79999 8.75293 8.54714 8.30285 8.09705C7.85276 7.64696 7.5999 7.03651 7.5999 6.39999C7.5999 5.76347 7.85276 5.15302 8.30285 4.70294C8.75293 4.25285 9.36338 3.99999 9.9999 3.99999C10.6364 3.99999 11.2469 4.25285 11.697 4.70294C12.147 5.15302 12.3999 5.76347 12.3999 6.39999ZM9.9999 11.2C8.85102 11.1998 7.72623 11.5294 6.7592 12.1497C5.79217 12.77 5.02355 13.6549 4.5447 14.6992C5.21991 15.4847 6.05703 16.1149 6.99864 16.5466C7.94024 16.9782 8.96407 17.2011 9.9999 17.2C11.0357 17.2011 12.0596 16.9782 13.0012 16.5466C13.9428 16.1149 14.7799 15.4847 15.4551 14.6992C14.9762 13.6549 14.2076 12.77 13.2406 12.1497C12.2736 11.5294 11.1488 11.1998 9.9999 11.2Z"})}),"UserCircle"),z=r(196),S=r(3963),k=r(9630),R=r(9995),M=r(60),P=function(e){var n=e.anchorEl,r=e.onClose,o=e.open,i=(0,v.Z)(e,["anchorEl","onClose","open"]),a=localStorage.getItem("token"),d=(0,l.useState)(""),u=d[0],x=d[1],h=(0,l.useState)(""),g=h[0],C=h[1],j=(0,l.useState)(!1),m=j[0],Z=j[1];return(0,l.useEffect)((function(){z.ZP.get("http://127.0.0.1:8000/backend/profile/me/",{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(a)}}).then((function(e){x(e.data.first_name),C(e.data.last_name),Z(e.data.is_admin)})).catch((function(e){console.log("error message",e)}))}),[]),(0,t.jsxs)(S.ZP,(0,f.Z)((0,p.Z)({anchorEl:n,anchorOrigin:{horizontal:"left",vertical:"bottom"},onClose:r,open:o,PaperProps:{sx:{width:"300px"}}},i),{children:[(0,t.jsxs)(s.Z,{sx:{py:1.5,px:2},children:[(0,t.jsx)(k.Z,{variant:"overline",children:!0===m?"Admin":"Consultant"}),(0,t.jsxs)(k.Z,{color:"text.secondary",variant:"body2",children:[g+" ",u]})]}),(0,t.jsx)(R.Z,{disablePadding:!0,sx:{"& > *":{"&:first-of-type":{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:"1px"},padding:"12px 16px"}},children:(0,t.jsx)(M.Z,{onClick:function(){localStorage.clear("token"),c().push("/login")},children:"Se d\xe9connecter"})})]}))};P.propTypes={anchorEl:u().any,onClose:u().func,open:u().bool.isRequired};var F=(0,g.Z)(C.Z)((function(e){var n=e.theme;return{backgroundColor:n.palette.background.paper,boxShadow:n.shadows[3]}})),T=function(e){var n=e.onSidebarOpen,r=(0,v.Z)(e,["onSidebarOpen"]),o=(0,l.useRef)(null),i=(0,l.useState)(!1),a=i[0],c=i[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F,(0,f.Z)((0,p.Z)({sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}}},r),{children:(0,t.jsxs)(j.Z,{disableGutters:!0,sx:{minHeight:64,left:0,px:2},children:[(0,t.jsx)(m.Z,{onClick:n,sx:{display:{xs:"inline-flex",lg:"none"}},children:(0,t.jsx)(w.Z,{fontSize:"small"})}),(0,t.jsx)(s.Z,{sx:{flexGrow:1}}),(0,t.jsx)(Z.Z,{onClick:function(){return c(!0)},ref:o,sx:{cursor:"pointer",height:40,width:40,ml:1},children:(0,t.jsx)(y,{fontSize:"small"})})]})})),(0,t.jsx)(P,{anchorEl:o.current,open:a,onClose:function(){return c(!1)}})]})};T.propTypes={onSidebarOpen:u().func};var E=r(1664),B=r.n(E),H=r(1225),_=r(4373),A=r(4631),G=((0,b.Z)((0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Cog"),(0,b.Z)((0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Lock"),(0,b.Z)((0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"User")),I=((0,b.Z)((0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),"UserAdd"),(0,b.Z)((0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}),"Users")),O=r(3265),U=r(5084),D=function(e){var n=e.href,r=e.icon,o=e.title,l=(0,v.Z)(e,["href","icon","title"]),i=(0,a.useRouter)(),c=!!n&&i.pathname===n;return(0,t.jsx)(O.ZP,(0,f.Z)((0,p.Z)({disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2}},l),{children:(0,t.jsx)(B(),{href:n,passHref:!0,children:(0,t.jsx)(U.Z,{component:"a",startIcon:r,disableRipple:!0,sx:{backgroundColor:c&&"rgba(255,255,255, 0.08)",borderRadius:1,color:c?"secondary.main":"neutral.300",fontWeight:c&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:c?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}},children:(0,t.jsx)(s.Z,{sx:{flexGrow:1},children:o})})})}))};D.propTypes={href:u().string,icon:u().node,title:u().string};var W=r(1379),N=[{href:"/reclamations",icon:(0,t.jsx)(W.Z,{fontSize:"small"}),title:"R\xe9clamations"},{href:"/profiles",icon:(0,t.jsx)(I,{fontSize:"small"}),title:"Profils"},{href:"/account",icon:(0,t.jsx)(G,{fontSize:"small"}),title:"Mon compte"}],V=function(e){var n=e.open,r=e.onClose,o=(0,a.useRouter)(),i=(0,H.Z)((function(e){return e.breakpoints.up("lg")}),{defaultMatches:!0,noSsr:!1});(0,l.useEffect)((function(){o.isReady&&n&&(null===r||void 0===r||r())}),[o.asPath]);var c=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,t.jsx)("div",{children:(0,t.jsx)(s.Z,{sx:{p:3},children:(0,t.jsx)("a",{children:(0,t.jsx)("img",{src:"/static/trace.svg",style:{height:50,width:151,marginBottom:-25}})})})}),(0,t.jsx)(_.Z,{sx:{borderColor:"#2D3748",my:3}}),(0,t.jsx)(s.Z,{sx:{flexGrow:1},children:N.map((function(e){return(0,t.jsx)(D,{icon:e.icon,href:e.href,title:e.title},e.title)}))}),(0,t.jsx)(_.Z,{sx:{borderColor:"#2D3748"}})]})});return i?(0,t.jsx)(A.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent",children:c}):(0,t.jsx)(A.ZP,{anchor:"left",onClose:r,open:n,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:function(e){return e.zIndex.appBar+100}},variant:"temporary",children:c})};V.propTypes={onClose:u().func,open:u().bool};var q=(0,i.ZP)("div")((function(e){var n=e.theme;return(0,o.Z)({display:"flex",flex:"1 1 auto",maxWidth:"100%",paddingTop:64},n.breakpoints.up("lg"),{paddingLeft:280})})),L=function(e){var n=e.children,r=(0,l.useState)(!0),o=r[0],i=r[1];return(0,t.jsxs)(h,{children:[(0,t.jsx)(q,{children:(0,t.jsx)(s.Z,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:n})}),(0,t.jsx)(T,{onSidebarOpen:function(){return i(!0)}}),(0,t.jsx)(V,{onClose:function(){return i(!1)},open:o})]})}}}]);