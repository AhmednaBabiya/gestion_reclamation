(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{7074:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client-rec-create",function(){return r(4869)}])},4869:function(e,n,r){"use strict";r.r(n);var i=r(6042),a=r(5893),t=r(9008),l=r.n(t),o=(r(1664),r(1163)),s=r.n(o),c=r(2175),d=r(4231),u=r(1953),h=r(6336),m=r(9630),p=r(7836),x=r(5343),v=r(8316),j=r(7961),g=r(60),f=r(5084),y=r(6480),Z=r(196),C=r(7294),_=r(9243),b=r(2741),B=C.forwardRef((function(e,n){return(0,a.jsx)(b.Z,(0,i.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.default=function(){var e=(0,C.useState)(null),n=e[0],r=e[1],i=(0,C.useState)(null),t=i[0],o=i[1],b=(0,C.useState)(!1),T=b[0],w=b[1],S=(0,C.useState)(!1),N=S[0],R=S[1],k=new FormData,q=(0,c.TA)({initialValues:{name:"",phone:"",nni:"",description:"",type:""},validationSchema:d.Ry({name:d.Z_().max(255).required("Le nom est requis"),phone:d.Z_().max(8).required("Le num\xe9ro du t\xe9l\xe9phone est requis"),nni:d.Z_().max(10).required("Le NNI est requis"),type:d.Z_().max(255).required("Le type est requis")}),onSubmit:function(){k.append("customer_name",q.values.name),k.append("customer_phone_number",q.values.phone),k.append("customer_nni_number",q.values.nni),k.append("identity_card",n,n.name),k.append("photo",t,t.name),k.append("description",q.values.description),k.append("type",q.values.type),Z.ZP.post("http://127.0.0.1:8000/backend/reclamation-create/",k,{"Content-Type":"application/json, multipart/form-data"}).then((function(e){localStorage.setItem("rec_id",e.data.id),w(!0)})).catch((function(e){R(!0),console.log(e)}))}}),L=function(e,n){"clickaway"!==n&&(w(!1),s().push("/reclamations"))},W=function(e,n){"clickaway"!==n&&R(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"BMI | Gestion de r\xe9clamation"})}),(0,a.jsx)(u.Z,{component:"main",sx:{alignItems:"center",display:"flex",flexGrow:1,minHeight:"100%"},children:(0,a.jsx)(h.Z,{maxWidth:"sm",children:(0,a.jsxs)("form",{onSubmit:q.handleSubmit,children:[(0,a.jsxs)(u.Z,{sx:{my:3},children:[(0,a.jsx)(m.Z,{color:"textPrimary",variant:"h4",children:"R\xe9clamations"}),(0,a.jsx)(m.Z,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Veuillez remplir le formulaire ci-dessous afin de cr\xe9er votre r\xe9clamation"})]}),(0,a.jsx)(p.Z,{error:Boolean(q.touched.name&&q.errors.name),fullWidth:!0,helperText:q.touched.name&&q.errors.name,label:"Nom",margin:"normal",name:"name",onBlur:q.handleBlur,onChange:q.handleChange,value:q.values.name,variant:"outlined"}),(0,a.jsx)(p.Z,{error:Boolean(q.touched.phone&&q.errors.phone),fullWidth:!0,helperText:q.touched.phone&&q.errors.phone,label:"T\xe9l\xe9phone",margin:"normal",name:"phone",onBlur:q.handleBlur,onChange:q.handleChange,value:q.values.phone,variant:"outlined"}),(0,a.jsx)(p.Z,{error:Boolean(q.touched.nni&&q.errors.nni),fullWidth:!0,helperText:q.touched.nni&&q.errors.nni,label:"Num\xe9ro NNI",margin:"normal",name:"nni",onBlur:q.handleBlur,onChange:q.handleChange,value:q.values.nni,variant:"outlined"}),(0,a.jsx)(p.Z,{error:Boolean(q.touched.description&&q.errors.description),fullWidth:!0,multiline:!0,helperText:q.touched.description&&q.errors.description,label:"Description",margin:"normal",name:"description",onBlur:q.handleBlur,onChange:q.handleChange,value:q.values.description,variant:"outlined"}),(0,a.jsxs)(x.Z,{fullWidth:!0,style:{marginTop:15},children:[(0,a.jsx)(v.Z,{children:"Type du r\xe9clamation"}),(0,a.jsxs)(j.Z,{labelId:"type",fullWidth:!0,label:"Type du r\xe9clamation",name:"type",onChange:q.handleChange,value:q.values.type,children:[(0,a.jsx)(g.Z,{value:"Activation",children:"Activation"}),(0,a.jsx)(g.Z,{value:"Changement de t\xe9l\xe9phone",children:"Changement de t\xe9l\xe9phone"}),(0,a.jsx)(g.Z,{value:"D\xe9blocage",children:"D\xe9blocage"}),(0,a.jsx)(g.Z,{value:"Changement de mot de passe",children:"Changement de mot de passe"}),(0,a.jsx)(g.Z,{value:"Virements",children:"Virements"}),(0,a.jsx)(g.Z,{value:"Autres",children:"Autres"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("br",{}),(0,a.jsxs)("div",{children:[t&&(0,a.jsxs)("div",{style:{marginTop:20},children:[(0,a.jsx)("img",{alt:"not found",width:"350px",height:"180px",src:URL.createObjectURL(t)}),(0,a.jsx)("br",{}),(0,a.jsx)(f.Z,{color:"primary",size:"small",variant:"contained",onClick:function(){return o(null)},children:"Supprimer"})]}),(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(v.Z,{style:{marginRight:93,marginTop:9},children:"Photo"}),(0,a.jsx)(y.Z,{type:"file",name:"photo",onChange:function(e){o(e.target.files[0])}})]})]}),(0,a.jsxs)("div",{children:[n&&(0,a.jsxs)("div",{style:{marginTop:20,marginRight:10},children:[(0,a.jsx)("img",{alt:"not found",width:"350px",height:"180px",src:URL.createObjectURL(n)}),(0,a.jsx)("br",{}),(0,a.jsx)(f.Z,{color:"primary",size:"small",variant:"contained",onClick:function(){return r(null)},children:"Supprimer"})]}),(0,a.jsxs)("div",{style:{display:"flex",marginTop:20,marginBottom:20},children:[(0,a.jsx)(v.Z,{style:{marginRight:20,marginTop:9},children:"Carte d'identit\xe9"}),(0,a.jsx)(y.Z,{color:"primary",type:"file",name:"identity_card",onChange:function(e){r(e.target.files[0])}})]})]})]}),(0,a.jsx)(u.Z,{sx:{py:2},children:(0,a.jsx)(f.Z,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Cr\xe9er la r\xe9clamation"})})]})})}),(0,a.jsx)(_.Z,{open:N,autoHideDuration:6e3,onClose:W,children:(0,a.jsx)(B,{onClose:W,severity:"error",children:"Erreur lors de la cr\xe9ation de votre r\xe9clamation, Veuillez vous assurer d'avoir remplir les champs nec\xe9ssaires"})}),(0,a.jsx)(_.Z,{open:T,autoHideDuration:5e3,onClose:L,style:{color:"#AB334B",textAlign:"center"},children:(0,a.jsx)(B,{onClose:L,severity:"success",children:"Votre r\xe9clamation a \xe9t\xe9 cr\xe9e avec succ\xe8s"})})]})}}},function(e){e.O(0,[615,583,936,664,836,971,141,84,774,888,179],(function(){return n=7074,e(e.s=n);var n}));var n=e.O();_N_E=n}]);